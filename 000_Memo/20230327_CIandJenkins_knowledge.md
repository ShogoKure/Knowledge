# Knowledge of CI and Jenkins

## Index

- [CI｜継続的インテグレーションcontinuous-integrationci](#継続的インテグレーションcontinuous-integrationci)
  - [CIの概要](#ciの概要)
  - [CIの最も重要な利点](#ciの最も重要な利点)
  - [一般的な継続的インテグレーションの流れ](#一般的な継続的インテグレーションの流れ)
  - [CIの参考サイト](#ciの参考サイト)
- [Jenkins](#jenkins)
  - [Jenkinsの概要](#jenkinsの概要)
  - [Jenkinsの特徴](#jenkinsの特徴)
  - [Jenkinsをdockerに構築する手順](#jenkinsをdockerに構築する手順)
  - [Jenkinsの参考サイト](#jenkinsの参考サイト)
- [関連用語](#関連用語)
  - [ビルド](#ビルド)
  - [テスト](#テスト)
  - [デプロイ](#デプロイ)
  - [リリース](#リリース)
  - [分散ビルド](#分散ビルド)
  - [DevOps](#devops)
  - [デプロイメント](#デプロイメント)
  - [ジョブ](#ジョブ)


## CI｜継続的インテグレーション（Continuous Integration、CI）

### CIの概要

---

継続的インテグレーション（Continuous Integration、CI）は、アプリケーション開発において、開発者がコードを書くたびに、自動的にビルドやテストなどのプロセスを実行し、問題があれば早期に発見しやすくする手法。  

CIの主な目的は、開発プロセスを迅速化し、品質を向上させること。コードを頻繁にビルドすることにより、コード変更の結果がすぐに確認できる。また、問題がある場合は早期に発見できるため、修正が容易になり、これにより、品質の向上やエラーの削減が期待できる。  

CIの実装には、ビルドやテストの自動化が必要。多くの場合、CIシステムは、リポジトリの変更をトリガーにして自動的にビルドとテストを実行する。このプロセスは、JenkinsやTravis CIなどのCIツールを使用して実行できる。  

### CIの最も重要な利点

---

- コードの品質向上：問題が早期に発見されるため、コードの品質が向上。
- リリースの迅速化：CIにより、問題の早期発見に加え、自動的なビルドとテストによって、開発チームはプロダクトの品質を保ちながら迅速なリリースを可能。
- コラボレーションの改善：CIにより、開発チームはコードの変更を共有し、問題を迅速に特定し、解決。

### 一般的な継続的インテグレーションの流れ

---

1. ソースコードの変更がリポジトリにプッシュされると、CIサーバーがそれを検知し、自動的にビルドを開始。
2. CIサーバーがビルドを実行し、成功または失敗の結果を出力。
3. 成功した場合、CIサーバーは次のステップに進み、アプリケーションをテスト。
4. テストが成功した場合、CIサーバーは、成果物（ビルドされたアプリケーション）をアーカイブし、デプロイ可能な状態化。
失敗した場合、CIサーバーはエラーを出力し、問題を特定するための情報を提供する。

### CIの参考サイト

---

- Jenkins: https://www.jenkins.io/
- CircleCI: https://circleci.com/
- AWS CodePipeline: https://aws.amazon.com/codepipeline/
- GitLab CI/CD: https://about.gitlab.com/stages-devops-lifecycle/continuous-integration/
- Atlassian Bamboo: https://www.atlassian.com/software/bamboo

## Jenkins

### Jenkinsの概要

---

Jenkinsは、オープンソースの継続的インテグレーション（CI）/継続的デリバリー（CD）ツールであり、Javaで書かれている。Jenkinsは、ビルド、テスト、デプロイメントなどのタスクを自動化し、DevOps文化を促進。  

### Jenkinsの特徴

---

1. カスタマイズ可能：プラグインにより、様々なタスクを実行するためのカスタマイズ性に優れている。プラグインにより、多数のツールや技術に対応可能であるため、多様な環境に対応可能。
2. 分散ビルド：ビルドエージェントを使って分散ビルドを実行可能で、これにより、大規模なプロジェクトでも高速かつ効率的なビルドが実現。
3. 多様な統合：多くの開発ツールやテクノロジーと統合することが可能。例えば、Git、Subversion、Mercurial、Maven、Gradle、Docker、AWSなど。
4. パイプラインジョブ：パイプラインジョブをサポートしている。これは、複数のステップを含むビルドプロセスを定義し、管理することができ、パイプラインジョブにより、ビルドプロセスの可視性とトレースが向上し、問題の追跡が容易になる。
5. 多様なプロジェクトタイプ：フリースタイルプロジェクト、マルチプロジェクト、パイプラインプロジェクト、マトリックスプロジェクト、マルチコンフィギュレーションプロジェクトなど、多様なプロジェクトタイプをサポート。

以上のことから、Jenkinsは、カスタマイズ可能性、分散ビルド、パイプラインジョブ、プラグインの豊富さ、大規模プロジェクトに適しているという特徴により、Jenkinsは、他のCIツールと比較しても優れた点が多いと言える。  

### JenkinsをDockerに構築する手順

1. Dockerをインストール
2. JenkinsのDockerイメージを取得

```bash
docker pull jenkins/jenkins:lts
```

- "lts" はLong-Term Supportの略称で、安定版を指定

3. Dockerコンテナを作成

```bash
docker run -d -p 8080:8080 -p 50000:50000 --name jenkins -v jenkins_home:/var/jenkins_home jenkins/jenkins:lts
```

- Dockerコンテナをデーモンとして実行し、Jenkinsの8080番ポートと50000番ポートをホストの同じポートにマッピングし、コンテナ名を "jenkins" に設定し、コンテナ内のJenkinsデータをホストの "jenkins_home" ボリュームに永続化
- "-d" オプションはDockerコンテナをデーモンとして実行するためのオプション
- "-p" オプションはポートのマッピングを行うためのオプション
- "--name" オプションはDockerコンテナの名前を設定するためのオプション
- "-v" オプションはボリュームのマウントを行うためのオプション
4. ブラウザでJenkinsにアクセスする

ブラウザで "http://localhost:8080" にアクセスし、Jenkinsの初期セットアップを行い、セットアップウィザードに従い、必要な設定を行う

以上が、JenkinsをDockerで構築する手順。Dockerを使用することで、環境の構築や移行が容易になり、柔軟性が高くなりまた、コンテナの起動と停止も簡単に行えるため、開発者や運用チームにとっても便利。

### Jenkinsの参考サイト

---

- Jenkins公式サイト: https://www.jenkins.io/
- Jenkinsチュートリアル: https://www.tutorialspoint.com/jenkins/
- Jenkinsユーザーガイド: https://jenkins.io/doc/

## 関連用語

#### ビルド

ビルドとは、ソースコードをコンパイルし、実行可能なアプリケーションやライブラリを作成する作業のこと。ビルドには、コンパイル、リンク、パッケージ化などの工程が含まれ、ソースコードの変更があった場合に実行され、その結果が正常であれば、デプロイの準備ができる。  

#### テスト

テストとは、アプリケーションやライブラリの品質を確認するために行われる作業のこと。テストには、単体テスト、結合テスト、システムテスト、負荷テスト、セキュリティテストなどがあり、開発者が変更したソースコードやビルド済みのアプリケーションに対して実施され、問題がないことが確認された場合に、リリースの準備ができる。

#### デプロイ

デプロイとは、作成したアプリケーションやライブラリを本番環境に配置する作業のこと。デプロイは、サーバーのセットアップ、アプリケーションのインストール、設定の変更などの工程が含まれ、自動化ツールを使用することで、繰り返しの作業を効率的に行うことができる。  

#### リリース

リリースとは、アプリケーションやライブラリを公開することを指す。リリースには、変更履歴の記録、バージョン番号の更新、ドキュメントの作成などが含まれ、リリースは、一般的にビルドとテストが完了してから行われる。

#### 分散ビルド

分散ビルドとは、ビルド作業を複数のマシンで分散して実行すること。分散ビルドを使用することで、ビルド時間を短縮することができまた、ビルドマシンの負荷分散も行うことができる。

#### パイプラインジョブ

パイプラインジョブとは、複数のジョブを組み合わせて、一連の処理を自動化するためのジョブのこと。パイプラインジョブは、ビルド、テスト、デプロイなどの一連の処理を一つのパイプラインで定義し、連続して実行することができる。パイプラインジョブは、JenkinsのPipeline pluginを使用することで実現することが可能。

#### DevOps

DevOpsとは、「開発」と「運用」を統合したソフトウェア開発手法のことで、開発チームと運用チームが協力して、ソフトウェアの開発・テスト・デプロイメント・運用を迅速かつ効率的に行うことを目的としている。

#### デプロイメント

デプロイメントとは、ソフトウェアを実際に稼働させる環境に配備することを指す。デプロイメントには、アプリケーションの設定やデータベースの移行、サーバーのセットアップなどが含まれる。

#### ジョブ

ジョブとは、Jenkins上で実行する単位のことを指し、ジョブは、ビルドやテスト、デプロイなどの処理を自動化するための設定が定義されたものであり、Jenkins上で管理・実行することができる。  
ジョブには、以下のような用語ある。  

- ビルド: ソースコードからアプリケーションをビルドする処理を指し、ビルドには、コンパイルやパッケージングなどが含まれる。
- テスト: アプリケーションの品質を確保するための処理を指し、テストには、単体テストや結合テスト、システムテストなどが含まれる。
- デプロイ: アプリケーションを実際に稼働させる環境に配備する処理を指し、デプロイには、設定やデータベースの移行、サーバーのセットアップなどが含まれる。
- リリース: アプリケーションをリリースするための処理を指し、リリースには、バージョン管理やリリースノートの作成、プロダクション環境へのデプロイなどが含まれる。

[TOP](#knowledge-of-ci-and-jenkins)